<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
   <HEAD>
   	  <link rel="stylesheet" type="text/css" href="lazarus.css">
      <TITLE>Lazarus: a software tool for reconstructing ancestral protein sequences</TITLE>
   </HEAD>
<BODY>
<p><a href='http://www.uoregon.edu/~joet/'><small>Thornton Lab</small></a> | <a href='http://evolution.uoregon.edu/'><small>CEEB</small></a> | <a href='http://uoregon.edu/'><small>University of Oregon</small></a> | <a href="http://www.victorhansonsmith.com"><small>Victor Hanson-Smith</small></a></p>
<h1>Lazarus</h1>
<p>A software tool for reconstructing ancestral molecular sequences.</p>
<hr>
<p><a href="index.html">Lazarus Home</a> | <a href="installation.html">Download and Install</a> | <a href="examples.html">Examples</a> </p>
<hr>

<h2>Installation</h2>

<p>Lazarus is a collection of Python scripts.  To install Lazarus on your machine, follow the steps below.  If you're completely unfamiliar with Python or the command-line, it will be useful to find a saavy friend to help you.</p>

<h3>1. Pre-Requisites</h3>

<p>Lazarus requires these packages:</p>

<ul>
<li>Python 2.6 (or newer)</li>
<li>NumPy</li>
<li>PyCogent</li>
<li>PAML versions 4.4</li>
</ul>

<h4>1a. Python 2.6</h4>
<p>If you're using OS X, Python is probably installed on your machine.  To test if you have Python, type the following 
in your terminal:
<div class="divBlue">
<p>$> python --version</p>
</div>

<p>If Python is installed, you will see output like this:</p>
<div class="divBlue">
<p>Python 2.7.2</p>
</div>

<p>If Python is not installed, you will see output like this:</p>
<div class="divBlue">
<p>-bash: python: command not found</p>
</div>

<h4>1b. NumPy</h4>
<p>Install the Python package NumPy.  It is available here: <a href="http://www.numpy.org">http://www.numpy.org</a></p>

<p>You can test if NumPy was successfully installed.  Type the following at your terminal.  First, load interactive Python:</p>
<div class="divBlue">
<p class="code">$> python<br>
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34)<br> 
</p>
</div>

<p>Then, try to import NumPy:</p>
<div class="divBlue">
<p class="code">>>> import numpy
</p>
</div>

<p>If NumPy successfully loaded, then you will not see any error messages.  If NumPy is not installed, however, you will
something like this:

<div class="divBlue">
<p class="code">Traceback (most recent call last):<br>
  File "<stdin>", line 1, in <module><br>
ImportError: No module named numpy
</p>
</div>

<h4>1c. PyCogent</h4>
<p>PyCogent is a Python package for parsing alignment files and phylogenetic trees.  Lazarus relies on PyCogent for many tasks, including rooting trees and finding ancestral nodes.  You can <a href="http://sourceforge.net/projects/pycogent">download PyCogent from SourceForge</a>.  For more information about PyCogent, see <a href="http://genomebiology.com/2007/8/8/R171">Knight et al., Genome Biology 2007</a></p>

<p>After you install PyCogent, ensure that the Python package named "cogent" is accessible from the Python path.  To test, use the interactive Python shell:</p>

<div class="divBlue">
<p class="code">
$>python<br>
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34)<br> 
>>> from cogent import *</p>
</div>

<p>If PyCogent is successfully loaded, then you will not see any error messages.  If PyCogent is not correctly installed,
however, then you will an error message like this:</p>

<div class="divBlue">
<p class="code">
Traceback (most recent call last):<br>
  File "<stdin>", line 1, in <module><br>
ImportError: No module named cogent<br>

</p>
</div>


<h4>1d. PAML</h4>
<p>Lazarus requires the applications <em>codeml</em> and <em>baseml</em>, which are part of the PAML software suite.  PAML version 4.4 is  included with Lazarus, in a folder titled <em>paml</em>.  If you want to try another version of PAML, please visit the <a href="http://abacus.gene.ucl.ac.uk/software/paml.html">official PAML webpage for instructions.</a></p>

<p><strong>First, build the PAML code.</strong>  If you're using OSX, you can save yourself time and simply use the prebuilt PAML binaries in the folder <em>paml/bin</em>.  Otherwise, you can build your own binaries from source code by following the instructions in the text file located at <em>paml/src/README.txt</em></p>

<p><strong>Second, build soft links.</strong>  In order for Lazarus to find PAML programs, you need to ensure that <em>codeml</em> and <em>baseml</em> can be accessed from anywhere on your machine.  On Unix/Linux/OSX machines, you can do this by adding soft links as follows:<p>

<div class="divBlue">
<p class="code">
$> sudo ln -s /Applications/lazarus/paml/bin/codeml /usr/bin/codeml<br>
$> sudo ln -s /Applications/lazarus/paml/bin/baseml /usr/bin/baseml<br>
</p>
</div>

<p>. . . in the above example, we create links in <em>/usr/bin</em> to files in <em>/Applications/lazarus/paml/bin</em>.  You may need to change the particular paths in this example to match your setup.</p>

<p>Next, verify that <em>codeml</em> and <em>baseml</em> are accessible.  Specifically, try invoking <em>codeml</em> and <em>baseml</em> from the command-line.  If PAML is accessible, then you should see output like this:<p>

<div class="divBlue">
<p class="code">
>$ baseml<br>
BASEML in paml version 4.4b, July 2010<br>
<br>
error when opening file baseml.ctl<br>
tell me the full path-name of the file?<br>
</p>

<p class="code">
>$ codeml<br>
<br>
error when opening file codeml.ctl<br>
tell me the full path-name of the file?<br>
</p>
</div>

<p>If <em>codeml</em> or <em>baseml</em> are not accessible from your system-wide path, then you will see output like this (below).  If you have this problem, return to the beginning of step #2 (above), and read the instructions carefully.</p>

<div class="divBlue">
<p class="code">
$>baseml<br>
-bash: baseml: command not found

<p class="code">
$>codeml<br>
-bash: codeml: command not found
</div>



<h3>2. Download Lazarus</h3>

<p>Download Lazarus from Google Code:</p>

<div class="divBlue">
<p>DOWNLOAD: <a href="http://code.google.com/p/project-lazarus/">project-lazarus</a></p>
</div>

<p>In Google Code, follow the link for "Source" and then click on the button to download "zip".<br>
Save the zip to a safe place on your machine, and then unpackage it.  For example, if you're using OSX, a good place is <em>~/Applications/</em>.  

<p><strong>At this point, you should be able to use Lazarus.</strong>  Simply run the Python scripts.<p>

<h3>3. Using Lazarus</h3>

<p>Lazarus comes in two flavors:</p>

<h4>2a. Lazarus GUI</h4> <p>The GUI provides a PhyML-like interface for composing codeml and baseml jobs.  This is a good place to start
for basic analysis.  To launch Lazarus GUI, use the following script:</p>

<div class="divBlue">
<p class="code">$> python lazarus_gui.py
</p>
</div>

<h4>2b. Lazarus BATCH</h4> <p>The batch mode provides a command-line interface using flags and parameters.  This is useful for launching Lazarus
from within other scripts.  To launch Lazarus BATCH, use the following script:</p>

<div class="divBlue">
<p class="code">$> python lazarus_batch.py --codeml</p>
<p>Or,</p>
<p class="code">$> python lazarus_batch.py --baseml</p>
</div>

<p>See the <a href="examples.html"/>Examples page</a> for information about using Lazarus.</p>

<h4>That's it.  Enjoy Lazarus.</h4>

<hr>

</BODY>
</HTML>